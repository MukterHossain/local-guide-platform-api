model Availability {
    id        String   @id @default(cuid())
    tourId    String
    guideId   String
    startAt   DateTime
    endAt     DateTime
    isBooked  Boolean  @default(false)
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    tour     Tour      @relation("TourAvailabilities", fields: [tourId], references: [id], onDelete: Cascade)
    guide    User      @relation(fields: [guideId], references: [id], onDelete: Cascade)
    bookings Booking[]

    @@unique([guideId, startAt, endAt])
    @@map("availabilities")
}

model Wishlist {
    id        String   @id @default(cuid())
    userId    String
    tourId    String
    title     String?
    message   String
    meta      Json?
    read      Boolean  @default(false)
    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    user User @relation(fields: [userId], references: [id], onDelete: Cascade)
    tour Tour @relation(fields: [tourId], references: [id], onDelete: Cascade)

    @@map("wishlists")
}

model Report {
    id         String  @id @default(cuid())
    reporterId String
    guideId    String
    reason     String
    details    String?

    status ReportStatus @default(PENDING)

    adminId   String?
    adminNote String?

    resolvedAt DateTime?
    createdAt  DateTime  @default(now())
    updatedAt  DateTime  @updatedAt

    reporter User  @relation("ReportReporter", fields: [reporterId], references: [id], onDelete: Cascade)
    guide    User  @relation("ReportGuide", fields: [guideId], references: [id], onDelete: Cascade)
    admin    User? @relation("ReportAdmin", fields: [adminId], references: [id])

    @@map("reports")
}

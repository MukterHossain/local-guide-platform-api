model User {
    id                 String     @id @default(cuid())
    name               String
    email              String     @unique
    password           String
    phone              String?
    needPasswordChange Boolean    @default(true)
    role               UserRole   @default(TOURIST)
    isDeleted          Boolean    @default(false)
    status             UserStatus @default(ACTIVE)
    createdAt          DateTime   @default(now())
    updatedAt          DateTime   @updatedAt

    profile           Profile?
    touristPreference TouristPreference?

    tours          Tour[]          @relation("GuideTours")
    bookings       Booking[]       @relation("UserBookings")
    reviews        Review[]        @relation("UserReviews")
    guideReviews   Review[]        @relation("GuideReviews")
    guideLocations GuideLocation[] @relation("GuideLocations")
    wishlist       Wishlist[]
    reportsFiled   Report[]        @relation("ReportReporter")
    reportsAgainst Report[]        @relation("ReportGuide")
    adminReports   Report[]        @relation("ReportAdmin")
    availabilities Availability[]

    @@map("users")
}

model Profile {
    id     String @id @default(cuid())
    userId String @unique

    // Common profile fields
    image     String?
    bio       String?
    languages String[]
    gender    Gender?
    address   String?

    // Guide-specific fields
    expertise          String?
    experienceYears    Int?
    dailyRate          Float?
    locationId         String?
    avgRating          Float?                  @default(0)
    availableStatus    Boolean                 @default(true)
    verificationStatus GuideVerificationStatus @default(PENDING)
    adminNote          String?

    location Location? @relation(fields: [locationId], references: [id])
    user     User      @relation(fields: [userId], references: [id], onDelete: Cascade)

    @@map("profiles")
}

model TouristPreference {
    id     String @id @default(cuid())
    userId String @unique

    interests      String[] // ["History", "Food", "Nature"]
    travelStyle    TravelStyle
    preferredLangs String[] // ["English", "Bangla"]
    groupSize      Int?
    travelPace     TravelPace?

    user User @relation(fields: [userId], references: [id], onDelete: Cascade)

    @@map("tourist_preferences")
}
